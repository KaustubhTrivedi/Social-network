(this.webpackJsonpinstagram=this.webpackJsonpinstagram||[]).push([[0],{53:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),s=a(18),r=a.n(s),o=(a(53),a(16)),i=a.p+"static/media/blueberry.186876af.svg",l=a(90),u=a(91),p=a(92),j=a(93),d=a(31),m=(d.a.initializeApp({apiKey:"AIzaSyAP_K6-MXoOqulkKemKzxw03SdE20pZD-Y",authDomain:"social-59f2f.firebaseapp.com",projectId:"social-59f2f",storageBucket:"social-59f2f.appspot.com",messagingSenderId:"244973617294",appId:"1:244973617294:web:9f94aedf45a37c0a0c49df"}),d.a.firestore()),b=d.a.auth(),O=d.a.storage(),g=(a(59),a(94)),f=(a(60),a(32)),h=a(5);var x=function(e){var t=e.postId,a=e.username,n=e.caption,s=e.user,r=e.imageUrl,i=Object(c.useState)([]),l=Object(o.a)(i,2),u=l[0],p=l[1],j=Object(c.useState)(""),d=Object(o.a)(j,2),b=d[0],O=d[1];return Object(c.useEffect)((function(){var e;if(t)return e=m.collection("posts").doc(t).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){p(e.docs.map((function(e){return e.data()})))})),function(){e()}}),[t]),Object(h.jsxs)("div",{className:"post",children:[Object(h.jsxs)("div",{className:"post__header",children:[Object(h.jsx)(g.a,{className:"post__avatar",src:"/assets/images/avatar.jpg",alt:a}),Object(h.jsx)("h3",{className:"post__username",children:a})]}),Object(h.jsx)("img",{className:"post__image",src:r,alt:"userImage"}),Object(h.jsxs)("p",{className:"seperator",children:[Object(h.jsx)("strong",{children:a}),n]}),Object(h.jsx)("div",{children:""}),Object(h.jsx)("div",{className:"post_comments",children:u.map((function(e){return Object(h.jsxs)("p",{children:[Object(h.jsx)("strong",{children:e.username})," ",e.text]})}))}),s?Object(h.jsx)("div",{children:Object(h.jsxs)("form",{className:"post__commentBox",children:[Object(h.jsx)("input",{className:"post__input",type:"text",placeholder:"Add a comment",value:b,onChange:function(e){return O(e.target.value)}}),Object(h.jsx)("button",{className:"post__button",disabled:!b,type:"submit",onClick:function(e){e.preventDefault(),m.collection("posts").doc(t).collection("comments").add({text:b,username:s.displayName,timestamp:f.a.firestore.FieldValue.serverTimestamp()}),O("")},children:"Post"})]})}):Object(h.jsx)("p",{children:"Please login to write comment"})]})};a(66);var v=function(e){var t=e.username,a=Object(c.useState)(null),n=Object(o.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)(0),l=Object(o.a)(i,2),u=l[0],j=l[1],d=Object(c.useState)(""),b=Object(o.a)(d,2),g=b[0],x=b[1];return Object(h.jsxs)("div",{className:"imageUpload",children:[Object(h.jsx)("progress",{className:"imageUpload__progress",variant:"determinate",value:u,max:"100"})," ",Object(h.jsx)("br",{}),Object(h.jsx)("input",{type:"text",placeholder:"Enter a caption",onChange:function(e){return x(e.target.value)},value:g}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{type:"file",placeholder:"",onChange:function(e){e.target.files[0]&&r(e.target.files[0])}}),Object(h.jsx)(p.a,{onClick:function(){O.ref("images/".concat(s.name)).put(s).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);j(t)}),(function(e){console.log(e),alert(e.message)}),(function(){O.ref("images").child(s.name).getDownloadURL().then((function(e){m.collection("posts").add({timestamp:f.a.firestore.FieldValue.serverTimestamp(),caption:g,imageUrl:e,username:t}),j(0),x(""),r(null)}))}))},children:" Upload"})]})};function _(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var N=Object(l.a)((function(e){return{paper:{position:"absolute",outline:0,width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",padding:e.spacing(2,4,3)}}}));var y=function(){var e=N(),t=Object(c.useState)(_),a=Object(o.a)(t,1)[0],n=Object(c.useState)([]),s=Object(o.a)(n,2),r=s[0],l=s[1],d=Object(c.useState)(!1),O=Object(o.a)(d,2),g=O[0],f=O[1],y=Object(c.useState)(!1),S=Object(o.a)(y,2),w=S[0],C=S[1],I=Object(c.useState)(""),k=Object(o.a)(I,2),U=k[0],E=k[1],A=Object(c.useState)(""),B=Object(o.a)(A,2),D=B[0],P=B[1],L=Object(c.useState)(""),K=Object(o.a)(L,2),M=K[0],z=K[1],F=Object(c.useState)(null),T=Object(o.a)(F,2),J=T[0],V=T[1];return Object(c.useEffect)((function(){document.title="Social Media"}),[]),Object(c.useEffect)((function(){var e=b.onAuthStateChanged((function(e){e?(console.log(e),V(e)):V(null)}));return function(){e()}}),[J,U]),Object(c.useEffect)((function(){m.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){l(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsxs)("div",{className:"app__header app__logoHeader",children:[Object(h.jsx)("div",{children:Object(h.jsx)("img",{className:"app_headerImage",src:i,width:250,height:60,alt:"headerImage"})}),Object(h.jsx)("div",{className:"titleFont",children:Object(h.jsx)("strong",{children:"\ud83e\uded0Blue Berries\ud83e\uded0"})}),J?Object(h.jsx)(p.a,{onClick:function(e){e.preventDefault(),b.signOut(),V(null)},children:"Logut"}):Object(h.jsxs)("div",{children:[Object(h.jsx)(p.a,{onClick:function(){f(!0)},children:"Sign In"}),Object(h.jsx)(p.a,{onClick:function(){C(!0)},children:"Sign Up"})]})]}),Object(h.jsx)("div",{className:"app__imageUpload",children:J?Object(h.jsx)(v,{username:J.displayName}):Object(h.jsx)("h3",{children:"You need to login to upload"})}),Object(h.jsx)("div",{className:"app__posts",children:Object(h.jsx)("div",{className:"app_postsLeft",children:r.map((function(e){var t=e.id,a=e.post;return Object(h.jsx)(x,{postId:t,user:J,username:a.username,caption:a.caption,imageUrl:a.imageUrl},t)}))})}),Object(h.jsx)(u.a,{className:"modal",open:w,onClose:function(){C(!1)},children:Object(h.jsx)("div",{style:a,className:e.paper,children:Object(h.jsxs)("center",{children:[Object(h.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"Instagram Logo"}),Object(h.jsxs)("form",{className:"app__signup",children:[Object(h.jsx)(j.a,{placeholder:"username",type:"text",value:U,onChange:function(e){return E(e.target.value)}}),Object(h.jsx)(j.a,{placeholder:"email",type:"text",value:M,onChange:function(e){return z(e.target.value)}}),Object(h.jsx)(j.a,{placeholder:"password",type:"password",value:D,onChange:function(e){return P(e.target.value)}}),Object(h.jsx)(p.a,{type:"submit",onClick:function(e){e.preventDefault(),b.createUserWithEmailAndPassword(M,D).then((function(e){return e.user.updateProfile({displayName:U})})).catch((function(e){return alert(e.message)}))},children:"Sign Up"})]})]})})}),Object(h.jsx)(u.a,{className:"modal",open:g,onClose:function(){f(!1)},children:Object(h.jsx)("div",{style:a,className:e.paper,children:Object(h.jsxs)("center",{children:[Object(h.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"Instagram Logo"}),Object(h.jsxs)("form",{className:"app__signup",children:[Object(h.jsx)(j.a,{placeholder:"email",type:"text",value:M,onChange:function(e){return z(e.target.value)}}),Object(h.jsx)(j.a,{placeholder:"password",type:"password",value:D,onChange:function(e){return P(e.target.value)}}),Object(h.jsx)(p.a,{type:"submit",onClick:function(e){e.preventDefault(),b.signInWithEmailAndPassword(M,D).catch((function(e){return alert(e.message)})),C(!1)},children:"Sign In"})]})]})})})]})};r.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(y,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.7a690d54.chunk.js.map